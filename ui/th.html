<!doctype html>
<html lang="th">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>การแปลเสียง POC</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Link to Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined&display=block" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Chakra+Petch:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
        rel="stylesheet">
    <style>
        * {
            box-sizing: border-box;
            font-family: "Chakra Petch", sans-serif;
        }

        .wrap {
            margin: 24px auto;
            padding: 0 12px
        }

        @media print {
            body * {
                visibility: hidden;
            }

            #printTable,
            #printTable * {
                visibility: visible;
            }

            #printTable {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                table-layout: fixed;
                /* ทำให้ตารางเต็มหน้ากระดาษ */
                page-break-before: always;
                /* พิมพ์ตารางในหน้ากระดาษใหม่ */
            }
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">การแปลเสียง POC</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            TH
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="index.html">EN</a></li>
                        </ul>
                    </li>
                </ul>
                <div class="d-flex justify-content-center align-items-center">
                    <button type="button" class="btn btn-warning text-center d-flex align-items-center">
                        <span class="material-symbols-outlined me-2">account_circle</span> User_MDS1
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="wrap">
        <div class="row d-flex">
            <!-- Audio Devices Section (left) -->
            <div class="col-12 col-md-4 d-flex">
                <div class="card h-100 w-100 d-flex flex-column">
                    <div class="card-body">
                        <h5 class="card-title">อุปกรณ์เสียง</h5>
                        <p class="card-text text-muted">แสดงข้อมูลอุปกรณ์อินพุตและเอาท์พุตสำหรับการทดสอบ</p>

                        <!-- Scan Devices Section -->
                        <h6 class="card-title">ค้นหาอุปกรณ์</h6>
                        <div class="mb-3">
                            <label for="inDev" class="form-label">อุปกรณ์อินพุต</label>
                            <select id="inDev" class="form-select">
                                <!-- Options can be dynamically populated -->
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="outDev" class="form-label">อุปกรณ์เอาท์พุต</label>
                            <select id="outDev" class="form-select">
                                <!-- Options can be dynamically populated -->
                            </select>
                        </div>
                        <button class="btn btn-outline-secondary w-100" id="btnScan">ค้นหาอุปกรณ์</button>

                        <!-- Settings Section -->
                        <h6 class="card-title mt-4">การตั้งค่า</h6>
                        <div class="mb-3">
                            <label for="chunk" class="form-label">ขนาดชิ้นข้อมูล</label>
                            <select id="chunk" class="form-select">
                                <option value="20ms">20 ms</option>
                                <option value="40ms">40 ms</option>
                                <option value="80ms">80 ms</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="vad" class="form-label">ความไวของ VAD</label>
                            <select id="vad" class="form-select">
                                <option value="Low">ต่ำ</option>
                                <option value="Medium">กลาง</option>
                                <option value="High">สูง</option>
                            </select>
                        </div>
                        <button class="btn btn-primary w-100" id="applySettings">ใช้การตั้งค่า</button>
                    </div>
                </div>
            </div>

            <!-- Capture, Speaker A, and Speaker B Section (middle and right) -->
            <div class="col-12 col-md-8 d-flex flex-column">
                <div class="card h-100 w-100 d-flex flex-column p-2">
                    <!-- Capture Section (Row 1) -->
                    <div class="col-12 mb-3">
                        <div class="card h-100">
                            <div class="card-body">
                                <h5>การสตรีม</h5>
                                <div class="d-flex gap-3">
                                    <button class="btn btn-primary w-100" id="btnRec">เสียงเป็นข้อความ</button>
                                    <button class="btn btn-warning w-100" id="btnPause"
                                        style="display:none;">หยุดชั่วคราว</button>
                                    <button class="btn btn-warning w-100" id="btnResume"
                                        style="display:none;">ดำเนินการต่อ</button>
                                    <button class="btn btn-danger w-100" id="btnStop"
                                        style="display:none;">หยุด</button>
                                    <button class="btn btn-secondary w-100" id="btnClear">ล้าง</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Speaker A and Speaker B Section (Row 2) -->
                    <div class="row d-flex">
                        <!-- Speaker A (Row 2, Left Column) -->
                        <div class="col-12 col-md-12 mb-3 d-flex">
                            <div class="card h-100 w-100">
                                <div class="card-body">
                                    <h5 class="d-flex justify-content-between">
                                        <span>ผู้พูด A</span>
                                        <span class="badge bg-secondary" id="aState"></span>
                                    </h5>
                                    <select class="form-select mb-3" id="srcLang"></select>
                                    <h6>อัปโหลดไฟล์</h6>
                                    <input id="audioFile" type="file" class="form-control mb-2" accept=".wav, .pcm" />
                                    <button id="btnUploadAudio" class="btn btn-outline-secondary w-100 mb-3">
                                        <span id="btnText">แปลงเสียงเป็นข้อความ (อัปโหลดเสียง)</span>
                                        <span id="spinner" class="spinner-border spinner-border-sm" role="status"
                                            aria-hidden="true" style="display: none;"></span>
                                    </button>
                                    <h6>ผลลัพธ์</h6>
                                    <textarea id="aInput" class="form-control"
                                        placeholder="พิมพ์/แก้ไขข้อความก่อนการแปล..."></textarea>
                                    <div class="d-flex gap-2 mt-3">
                                        <button id="btnTranslate" class="btn btn-primary w-50">
                                            <span id="btnTextT">แปล</span>
                                            <span id="spinnerT" class="spinner-border spinner-border-sm" role="status"
                                                aria-hidden="true" style="display: none;"></span>
                                        </button>
                                        <button class="btn btn-outline-secondary w-50" id="ttsA">แปลงข้อความเป็นเสียง
                                            (ผู้พูด A)</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Speaker B (Row 2, Right Column) -->
                        <div class="col-12 col-md-12 mb-3 d-flex">
                            <div class="card h-100 w-100">
                                <div class="card-body">
                                    <h5 class="d-flex justify-content-between">
                                        <span>ผู้พูด B</span>
                                        <span class="badge bg-secondary" id="bState"></span>
                                    </h5>
                                    <select class="form-select mb-3" id="tgtLang"></select>
                                    <h6>ผลลัพธ์</h6>
                                    <textarea id="bOutput" class="form-control" placeholder="ผลลัพธ์จะปรากฏที่นี่..."
                                        readonly></textarea>
                                    <div class="mt-3">
                                        <button class="btn btn-outline-secondary w-100" id="ttsB">แปลงข้อความเป็นเสียง
                                            (ผู้พูด B)</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Evidence Table -->
        <div class="card mt-4" id="printTable">
            <div class="card-body">
                <h5 class="card-title">หลักฐาน</h5>
                <div class="d-flex gap-2 mt-3 justify-content-end">
                    <button class="btn btn-outline-secondary" onclick="window.print()">พิมพ์ (PDF)</button>
                    <button class="btn btn-outline-secondary" onclick="exportToJson()">ส่งออกเป็น JSON</button>
                </div>
                <div class="overflow-auto mt-3">
                    <table class="table table-bordered table-sm">
                        <thead>
                            <tr>
                                <th class="text-center" id="time">เวลา</th>
                                <th class="text-center" id="original">ต้นฉบับ</th>
                                <th class="text-center" id="translated">แปล</th>
                                <th class="text-center" id="stt(s)">เสียงเป็นข้อความ (s)</th>
                                <th class="text-center" id="mt(s)">แปลโดยเครื่อง (s)</th>
                                <th class="text-center" id="tts(s)">แปลงข้อความเป็นเสียง (s)</th>
                                <th class="text-center" id="total(s)">รวม (s)</th>
                            </tr>
                        </thead>
                        <tbody id="logBody">
                            <tr>
                                <td colspan="7" class="text-center text-muted" id="noLogsMessage">ยังไม่มีบันทึก.
                                    กรุณาแปลข้อความเพื่อแสดงผล</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <script src="functions.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>